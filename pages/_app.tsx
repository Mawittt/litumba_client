import '../styles/globals.css'
import "../styles/Footer.scss"
import type { AppProps } from 'next/app'
import { store, wrapper } from '../store/store'
import { Provider } from 'react-redux'
import Head from 'next/head'
import LeftSideBar from '../components/LeftSideBar/LeftSideBar'
import TopNavBar from '../components/TopNavBar/TopNavBar'
import { RightIcon } from '../assets/icons'
import RightNavBar from '../components/RightNavBar/RightNavBar'
import FooterNav from '../components/FooterNav/FooterNav'
import { ReactElement, ReactNode, useEffect, useState } from 'react'
import { NextPage } from 'next'


export type NextPageWithLayout<P = {}, IP = P> = NextPage<P, IP> & {
    getLayout?: (page: ReactElement) => ReactNode
  }
  
  type AppPropsWithLayout = AppProps & {
    Component: NextPageWithLayout
  }

function App({ Component, pageProps }: AppPropsWithLayout ) {
    useEffect(()=>{
        window.addEventListener("resize",updateHeight)
        function updateHeight(){
            const app = document.getElementById('app')
            if(!app) return
            app.style.height = window.innerHeight + "px"
        }
        updateHeight()
        
        return window.removeEventListener('resize',updateHeight)
    },[])
    
    if(Component.getLayout) return Component.getLayout(<Component {...pageProps}/>)

    return (
        <Provider store={store}>
            <Head>
                <title>Litumba - The Bakwerian online platform</title>
                <meta name="description" content="Generated by create next app" />
                <link rel="icon" href="/favicon.png" />
            </Head>
            <div id='app' className={`overflow-hidden grid  h-[100vh]  grid-rows-[64px_auto_50px] sm:grid-cols-2 md:grid-rows-[auto_auto] md:grid-cols-[minmax(0px,max-content)_auto_minmax(0px,max-content)] max-w-[2000px] m-auto border-solid border-border border-[1.5px]`}>
                <div className=' hidden md:block md:row-span-2 md:h-full md:overflow-scroll '><LeftSideBar /></div>
                <div className='sm:col-span-2 md:col-span-2'><TopNavBar /></div>
                <div className=' h-full overflow-scroll overflow-x-hidden '><Component {...pageProps} /></div>
                <div className='hidden sm:block sm:h-full sm:overflow-scroll max-w-sm p-2 '><RightNavBar /></div>
                <div className=' sm:col-span-2 md:hidden w-full self-end'><FooterNav /></div>
            </div>
        </Provider>
    )
}


// * export default wrapper.withRedux(App) // this should serve as a reference to demonstrate how to wrap an a next app with next-redux-wrapper
export default App